<template>
  <view>
    <yy-paging
      v-model="state.dataList"
      @query="queryList"
      ref="paging"
      :auto="false"
      @scroll="scroll"
      :refresher-enabled="true"
    >
      <template #top>
        <u-navbar
          :background="{ backgroundColor: state.isScroll ? '#18C9D9' : '#18C9D9' }"
          :title="state.title"
          :border-bottom="false"
          title-color="#fff"
          isBack
          backIconColor="#fff"
        ></u-navbar>
      </template>
      <template #empty>
        <yy-empty></yy-empty>
      </template>
      <template #loadingMoreNoMore>
        <yy-nomore></yy-nomore>
      </template>
      <template #bottom>
        <view class="h-11"></view>
      </template>
      <view class="flex flex-col px-3"></view>
    </yy-paging>
    <!--  -->
    <!--  -->
    <!--  -->
    <yy-tabbar></yy-tabbar>
  </view>
</template>

<script setup>
  // çŠ¶æ€
  const state = ref({
    isScroll: false,
    dataList: [],
    title: 'é¦–é¡µ'
  })

  // ç»„ä»¶å¼•ç”¨
  const paging = ref()
  const alert = ref()

  // é¡µé¢ç”Ÿå‘½å‘¨æœŸï¼ˆUni-Appï¼‰
  onLoad(options => {
    console.log('ðŸš€ ~ :55 ~ options:', options)
  })

  // æ»šåŠ¨äº‹ä»¶
  const scroll = e => {
    state.value.isScroll = e.detail.scrollTop > 0
  }
  // åˆ—è¡¨æŸ¥è¯¢
  const queryList = (page, limit) => {
    console.log('ðŸš€ ~ :58 ~ queryList ~ page, limit:', page, limit)
    setTimeout(() => {
      paging.value?.complete([1])
    }, 1000)
  }
</script>

<style lang="scss" scoped></style>
